{"ast":null,"code":"import { SavingType } from '../../enums/saving-type.enum';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../savings.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../components/saving-filter/saving-filter.component\";\nimport * as i4 from \"../../components/savings-list/saving-list.component\";\nfunction SavingsPage_app_create_saving_modal_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-create-saving-modal\", 7);\n    i0.ɵɵlistener(\"createdSaving\", function SavingsPage_app_create_saving_modal_7_Template_app_create_saving_modal_createdSaving_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.addToSavings($event));\n    })(\"close\", function SavingsPage_app_create_saving_modal_7_Template_app_create_saving_modal_close_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.disableCreateMode());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"types\", ctx_r0.types);\n  }\n}\nfunction SavingsPage_app_update_saving_modal_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-update-saving-modal\", 8);\n    i0.ɵɵlistener(\"updatedSaving\", function SavingsPage_app_update_saving_modal_8_Template_app_update_saving_modal_updatedSaving_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.replaceSaving($event));\n    })(\"close\", function SavingsPage_app_update_saving_modal_8_Template_app_update_saving_modal_close_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.disableEditMode());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"types\", ctx_r1.types)(\"saving\", ctx_r1.savingToUpdate);\n  }\n}\nfunction SavingsPage_app_delete_saving_modal_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-delete-saving-modal\", 9);\n    i0.ɵɵlistener(\"remove\", function SavingsPage_app_delete_saving_modal_9_Template_app_delete_saving_modal_remove_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.removeSaving());\n    })(\"close\", function SavingsPage_app_delete_saving_modal_9_Template_app_delete_saving_modal_close_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.disableDeleteMode());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"saving\", ctx_r2.savingToDelete);\n  }\n}\nexport class SavingsPage {\n  constructor(savingsService) {\n    this.savingsService = savingsService;\n    this.savings = [];\n    this.types = Object.values(SavingType);\n    this.selectedType = null;\n    this.createMode = false;\n    this.editMode = false;\n    this.deleteMode = false;\n    this.savingToUpdate = null;\n    this.savingToDelete = null;\n  }\n  applyType(type) {\n    this.selectedType = type;\n    this.getSavings();\n  }\n  getSavings() {\n    this.savingsService.findAll(this.selectedType).subscribe(savings => this.savings = savings);\n  }\n  addToSavings(saving) {\n    this.savings.unshift(saving);\n  }\n  replaceSaving(saving) {\n    const savingToUpdate = this.savings.find(item => item.id === saving.id);\n    const index = this.savings.indexOf(savingToUpdate);\n    this.savings.splice(index, 1, saving);\n  }\n  removeSaving() {\n    this.savings = this.savings.filter(saving => saving.id !== this.savingToDelete.id);\n  }\n  enableCreateMode() {\n    this.createMode = true;\n  }\n  disableCreateMode() {\n    this.createMode = false;\n  }\n  enableEditMode(saving) {\n    this.editMode = true;\n    this.savingToUpdate = {\n      ...saving\n    };\n  }\n  disableEditMode() {\n    this.editMode = false;\n    this.savingToUpdate = null;\n  }\n  enableDeleteMode(saving) {\n    this.deleteMode = true;\n    this.savingToDelete = saving;\n  }\n  disableDeleteMode() {\n    this.deleteMode = false;\n    this.savingToDelete = null;\n  }\n  ngOnInit() {\n    this.getSavings();\n  }\n}\nSavingsPage.ɵfac = function SavingsPage_Factory(t) {\n  return new (t || SavingsPage)(i0.ɵɵdirectiveInject(i1.SavingsService));\n};\nSavingsPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SavingsPage,\n  selectors: [[\"app-savings\"]],\n  decls: 10,\n  vars: 5,\n  consts: [[1, \"container\"], [1, \"create-button\", 3, \"click\"], [3, \"types\", \"applyType\"], [3, \"savings\", \"savingToEdit\", \"savingToDelete\"], [3, \"types\", \"createdSaving\", \"close\", 4, \"ngIf\"], [3, \"types\", \"saving\", \"updatedSaving\", \"close\", 4, \"ngIf\"], [3, \"saving\", \"remove\", \"close\", 4, \"ngIf\"], [3, \"types\", \"createdSaving\", \"close\"], [3, \"types\", \"saving\", \"updatedSaving\", \"close\"], [3, \"saving\", \"remove\", \"close\"]],\n  template: function SavingsPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n      i0.ɵɵtext(2, \"Savings\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function SavingsPage_Template_button_click_3_listener() {\n        return ctx.enableCreateMode();\n      });\n      i0.ɵɵtext(4, \" Create \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"app-saving-filter\", 2);\n      i0.ɵɵlistener(\"applyType\", function SavingsPage_Template_app_saving_filter_applyType_5_listener($event) {\n        return ctx.applyType($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"app-saving-list\", 3);\n      i0.ɵɵlistener(\"savingToEdit\", function SavingsPage_Template_app_saving_list_savingToEdit_6_listener($event) {\n        return ctx.enableEditMode($event);\n      })(\"savingToDelete\", function SavingsPage_Template_app_saving_list_savingToDelete_6_listener($event) {\n        return ctx.enableDeleteMode($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(7, SavingsPage_app_create_saving_modal_7_Template, 1, 1, \"app-create-saving-modal\", 4);\n      i0.ɵɵtemplate(8, SavingsPage_app_update_saving_modal_8_Template, 1, 2, \"app-update-saving-modal\", 5);\n      i0.ɵɵtemplate(9, SavingsPage_app_delete_saving_modal_9_Template, 1, 1, \"app-delete-saving-modal\", 6);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"types\", ctx.types);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"savings\", ctx.savings);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.createMode);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.editMode);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.deleteMode);\n    }\n  },\n  dependencies: [i2.NgIf, i3.SavingFilterComponent, i4.SavingListComponent],\n  styles: [\".container[_ngcontent-%COMP%] {\\n  position: relative;\\n  width: 750px;\\n  margin: 0 auto;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n}\\n.container[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 25px;\\n  right: 0;\\n  height: 30px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbW9kdWxlcy9zYXZpbmdzL3BhZ2VzL3NhdmluZ3Mvc2F2aW5ncy5wYWdlLnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi8uLi8lRDAlQTAlRDAlQjAlRDAlQjElRDAlQkUlRDElODclRDAlQjglRDAlQjklMjAlRDElODElRDElODIlRDAlQkUlRDAlQkIvJUQwJTlEJUQwJUJFJUQwJUIyJUQwJUIwJUQxJThGJTIwJUQwJUJGJUQwJUIwJUQwJUJGJUQwJUJBJUQwJUIwJTIwKDgpL2NsaWVudC9zcmMvYXBwL21vZHVsZXMvc2F2aW5ncy9wYWdlcy9zYXZpbmdzL3NhdmluZ3MucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUNBLGFBQUE7RUFDQSxzQkFBQTtFQUNBLHVCQUFBO0FDQ0o7QURDSTtFQUNJLGtCQUFBO0VBQ0EsU0FBQTtFQUNBLFFBQUE7RUFDQSxZQUFBO0FDQ1IiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVyIHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgd2lkdGg6IDc1MHB4O1xuICAgIG1hcmdpbjogMCBhdXRvO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcblxuICAgICYgLmNyZWF0ZS1idXR0b24ge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMjVweDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGhlaWdodDogMzBweDtcbiAgICB9XG59IiwiLmNvbnRhaW5lciB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgd2lkdGg6IDc1MHB4O1xuICBtYXJnaW46IDAgYXV0bztcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG4uY29udGFpbmVyIC5jcmVhdGUtYnV0dG9uIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDI1cHg7XG4gIHJpZ2h0OiAwO1xuICBoZWlnaHQ6IDMwcHg7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["SavingType","i0","SavingsPage","constructor","savingsService","Object","values","applyType","type","selectedType","getSavings","findAll","subscribe","savings","addToSavings","saving","unshift","replaceSaving","savingToUpdate","find","item","id","index","indexOf","splice","removeSaving","filter","savingToDelete","enableCreateMode","createMode","disableCreateMode","enableEditMode","editMode","disableEditMode","enableDeleteMode","deleteMode","disableDeleteMode","ngOnInit","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\dh123\\OneDrive\\Рабочий стол\\Новая папка (8)\\client\\src\\app\\modules\\savings\\pages\\savings\\savings.page.ts","C:\\Users\\dh123\\OneDrive\\Рабочий стол\\Новая папка (8)\\client\\src\\app\\modules\\savings\\pages\\savings\\savings.page.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\n\nimport { SavingsService } from '../../savings.service';\nimport { SavingType } from '../../enums/saving-type.enum';\nimport { Saving } from '../../interfaces/saving.interface';\n\n@Component({\n    selector: 'app-savings',\n    templateUrl: './savings.page.html',\n    styleUrls: ['./savings.page.scss']\n})\nexport class SavingsPage implements OnInit {\n    savings: Saving[] = [];\n    types: SavingType[] = Object.values(SavingType);\n    selectedType: string | null = null;\n\n    createMode = false;\n    editMode = false;\n    deleteMode = false;\n    savingToUpdate: Saving | null = null;\n    savingToDelete: Saving | null = null;\n\n    constructor(private savingsService: SavingsService) { }\n    \n    applyType(type: string | null): void {\n        this.selectedType = type;\n        this.getSavings();\n    }\n\n    getSavings(): void {\n        this.savingsService.findAll(this.selectedType).subscribe(\n            savings => this.savings = savings,\n        );\n    }\n\n    addToSavings(saving: Saving): void {\n        this.savings.unshift(saving);\n    }\n\n    replaceSaving(saving: Saving): void {\n        const savingToUpdate = this.savings.find(item => item.id === saving.id)!;\n        const index = this.savings.indexOf(savingToUpdate);\n        this.savings.splice(index, 1, saving);\n    }\n\n    removeSaving(): void {\n        this.savings = this.savings.filter(saving =>\n            saving.id !== this.savingToDelete!.id);\n    }\n\n    enableCreateMode(): void {\n        this.createMode = true;\n    }\n\n    disableCreateMode(): void {\n        this.createMode = false;\n    }\n\n    enableEditMode(saving: Saving): void {\n        this.editMode = true;\n        this.savingToUpdate = { ...saving };\n    }\n\n    disableEditMode(): void {\n        this.editMode = false;\n        this.savingToUpdate = null;\n    }\n    \n    enableDeleteMode(saving: Saving): void {\n        this.deleteMode = true;\n        this.savingToDelete = saving;\n    }\n\n    disableDeleteMode(): void {\n        this.deleteMode = false;\n        this.savingToDelete = null;\n    }\n\n    ngOnInit(): void {\n        this.getSavings();\n    }\n}","<div class=\"container\">\n    <h2>Savings</h2>\n\n    <button\n        class=\"create-button\"\n        (click)=\"enableCreateMode()\">\n        Create\n    </button>\n\n    <app-saving-filter\n        [types]=\"types\"\n        (applyType)=\"applyType($event)\">\n    </app-saving-filter>\n\n    <app-saving-list\n        [savings]=\"savings\"\n        (savingToEdit)=\"enableEditMode($event)\"\n        (savingToDelete)=\"enableDeleteMode($event)\">\n    </app-saving-list>\n</div>\n\n<app-create-saving-modal\n    *ngIf=\"createMode\"\n    [types]=\"types\"\n    (createdSaving)=\"addToSavings($event)\"\n    (close)=\"disableCreateMode()\">\n</app-create-saving-modal>\n\n<app-update-saving-modal\n    *ngIf=\"editMode\"\n    [types]=\"types\"\n    [saving]=\"savingToUpdate!\"\n    (updatedSaving)=\"replaceSaving($event)\"\n    (close)=\"disableEditMode()\">\n</app-update-saving-modal>\n\n<app-delete-saving-modal\n    *ngIf=\"deleteMode\"\n    [saving]=\"savingToDelete!\"\n    (remove)=\"removeSaving()\"\n    (close)=\"disableDeleteMode()\">\n</app-delete-saving-modal>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}