{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/modules/auth/auth.service\";\nimport * as i2 from \"../../user.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction UpdateUserComponent_div_7_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UpdateUserComponent_div_7_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Only latin characters and numbers allowed\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UpdateUserComponent_div_7_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Min length equals to 4 characters\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UpdateUserComponent_div_7_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Max length equals to 12 characters\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UpdateUserComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtemplate(1, UpdateUserComponent_div_7_div_1_Template, 2, 0, \"div\", 10);\n    i0.ɵɵtemplate(2, UpdateUserComponent_div_7_div_2_Template, 2, 0, \"div\", 10);\n    i0.ɵɵtemplate(3, UpdateUserComponent_div_7_div_3_Template, 2, 0, \"div\", 10);\n    i0.ɵɵtemplate(4, UpdateUserComponent_div_7_div_4_Template, 2, 0, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r1 = i0.ɵɵreference(6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r1 == null ? null : _r1.errors == null ? null : _r1.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r1 == null ? null : _r1.errors == null ? null : _r1.errors[\"pattern\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r1 == null ? null : _r1.errors == null ? null : _r1.errors[\"minlength\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r1 == null ? null : _r1.errors == null ? null : _r1.errors[\"maxlength\"]);\n  }\n}\nfunction UpdateUserComponent_div_13_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UpdateUserComponent_div_13_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Invalid email\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UpdateUserComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtemplate(1, UpdateUserComponent_div_13_div_1_Template, 2, 0, \"div\", 10);\n    i0.ɵɵtemplate(2, UpdateUserComponent_div_13_div_2_Template, 2, 0, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r3 = i0.ɵɵreference(12);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3 == null ? null : _r3.errors == null ? null : _r3.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3 == null ? null : _r3.errors == null ? null : _r3.errors[\"pattern\"]);\n  }\n}\nexport class UpdateUserComponent {\n  constructor(authService, userService) {\n    this.authService = authService;\n    this.userService = userService;\n    const status = this.authService.getStatus();\n    if (status) {\n      this.user = status.user;\n    }\n  }\n  update() {\n    this.userService.updateUser({\n      username: this.user?.username,\n      email: this.user?.email\n    }).subscribe(() => {\n      const status = this.authService.getStatus();\n    });\n  }\n}\nUpdateUserComponent.ɵfac = function UpdateUserComponent_Factory(t) {\n  return new (t || UpdateUserComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.UserService));\n};\nUpdateUserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UpdateUserComponent,\n  selectors: [[\"app-update-user\"]],\n  decls: 16,\n  vars: 5,\n  consts: [[3, \"ngSubmit\"], [\"updateProfileForm\", \"ngForm\"], [1, \"input-group\"], [\"type\", \"text\", \"name\", \"username\", \"required\", \"\", \"minLength\", \"4\", \"maxLength\", \"12\", \"pattern\", \"^[a-zA-Z0-9]+$\", 3, \"ngModel\", \"ngModelChange\"], [\"username\", \"ngModel\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"type\", \"text\", \"name\", \"email\", \"required\", \"\", \"pattern\", \"^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$\", 3, \"ngModel\", \"ngModelChange\"], [\"email\", \"ngModel\"], [\"type\", \"submit\", 1, \"light\", 3, \"disabled\"], [1, \"error-message\"], [4, \"ngIf\"]],\n  template: function UpdateUserComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0, 1);\n      i0.ɵɵlistener(\"ngSubmit\", function UpdateUserComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.update();\n      });\n      i0.ɵɵelementStart(2, \"div\", 2)(3, \"label\");\n      i0.ɵɵtext(4, \"Username: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"input\", 3, 4);\n      i0.ɵɵlistener(\"ngModelChange\", function UpdateUserComponent_Template_input_ngModelChange_5_listener($event) {\n        return ctx.user.username = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(7, UpdateUserComponent_div_7_Template, 5, 4, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 2)(9, \"label\");\n      i0.ɵɵtext(10, \"Email: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"input\", 6, 7);\n      i0.ɵɵlistener(\"ngModelChange\", function UpdateUserComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.user.email = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(13, UpdateUserComponent_div_13_Template, 3, 2, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"button\", 8);\n      i0.ɵɵtext(15, \" Update \");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(1);\n      const _r1 = i0.ɵɵreference(6);\n      const _r3 = i0.ɵɵreference(12);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.username);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (_r1 == null ? null : _r1.invalid) && (_r1 == null ? null : _r1.dirty));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.email);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (_r3 == null ? null : _r3.invalid) && (_r3 == null ? null : _r3.dirty));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", _r0.invalid);\n    }\n  },\n  dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.PatternValidator, i4.NgModel, i4.NgForm],\n  styles: [\".input-group[_ngcontent-%COMP%], button[_ngcontent-%COMP%] {\\n  margin: 10px 0;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbW9kdWxlcy91c2VyL2NvbXBvbmVudHMvdXBkYXRlLXVzZXIvdXBkYXRlLXVzZXIuY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi8uLi8lRDAlQTAlRDAlQjAlRDAlQjElRDAlQkUlRDElODclRDAlQjglRDAlQjklMjAlRDElODElRDElODIlRDAlQkUlRDAlQkIvJUQwJTlEJUQwJUJFJUQwJUIyJUQwJUIwJUQxJThGJTIwJUQwJUJGJUQwJUIwJUQwJUJGJUQwJUJBJUQwJUIwJTIwKDgpL2NsaWVudC9zcmMvYXBwL21vZHVsZXMvdXNlci9jb21wb25lbnRzL3VwZGF0ZS11c2VyL3VwZGF0ZS11c2VyLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksY0FBQTtBQ0NKIiwic291cmNlc0NvbnRlbnQiOlsiLmlucHV0LWdyb3VwLCBidXR0b24ge1xuICAgIG1hcmdpbjogMTBweCAwO1xufSIsIi5pbnB1dC1ncm91cCwgYnV0dG9uIHtcbiAgbWFyZ2luOiAxMHB4IDA7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;;IAmBYA,2BAA4C;IAAAA,wBAAQ;IAAAA,iBAAM;;;;;IAC1DA,2BAA2C;IAAAA,yDAAyC;IAAAA,iBAAM;;;;;IAC1FA,2BAA6C;IAAAA,iDAAiC;IAAAA,iBAAM;;;;;IACpFA,2BAA6C;IAAAA,kDAAkC;IAAAA,iBAAM;;;;;IAPzFA,8BAE0B;IAEtBA,2EAA0D;IAC1DA,2EAA0F;IAC1FA,2EAAoF;IACpFA,2EAAqF;IACzFA,iBAAM;;;;;IAJIA,eAAoC;IAApCA,8FAAoC;IACpCA,eAAmC;IAAnCA,6FAAmC;IACnCA,eAAqC;IAArCA,+FAAqC;IACrCA,eAAqC;IAArCA,+FAAqC;;;;;IAmB3CA,2BAAyC;IAAAA,wBAAQ;IAAAA,iBAAM;;;;;IACvDA,2BAAwC;IAAAA,6BAAa;IAAAA,iBAAM;;;;;IAL/DA,8BAE0B;IAEtBA,4EAAuD;IACvDA,4EAA2D;IAC/DA,iBAAM;;;;;IAFIA,eAAiC;IAAjCA,8FAAiC;IACjCA,eAAgC;IAAhCA,6FAAgC;;;AC/BlD,OAAM,MAAOC,mBAAmB;EAG5BC,YACYC,WAAwB,EACxBC,WAAwB;IADxB,gBAAW,GAAXD,WAAW;IACX,gBAAW,GAAXC,WAAW;IAEnB,MAAMC,MAAM,GAAG,IAAI,CAACF,WAAW,CAACG,SAAS,EAAE;IAC3C,IAAID,MAAM,EAAE;MACR,IAAI,CAACE,IAAI,GAAGF,MAAM,CAACE,IAAI;;EAE/B;EAEAC,MAAM;IACF,IAAI,CAACJ,WAAW,CAACK,UAAU,CAAC;MACxBC,QAAQ,EAAE,IAAI,CAACH,IAAI,EAAEG,QAAQ;MAC7BC,KAAK,EAAE,IAAI,CAACJ,IAAI,EAAEI;KACrB,CAAC,CAACC,SAAS,CACR,MAAK;MACD,MAAMP,MAAM,GAAG,IAAI,CAACF,WAAW,CAACG,SAAS,EAAE;IAC/C,CAAC,CACJ;EACL;;AAtBSL,mBAAmB;mBAAnBA,mBAAmB;AAAA;AAAnBA,mBAAmB;QAAnBA,mBAAmB;EAAAY;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDVhCjB,kCAAwD;MAAtBA;QAAA,OAAYkB,YAAQ;MAAA,EAAC;MACnDlB,8BAAyB;MACdA,0BAAU;MAAAA,iBAAQ;MAEzBA,mCAQ6B;MALzBA;QAAA;MAAA,EAA2B;MAH/BA,iBAQ6B;MAE7BA,oEAQM;MACVA,iBAAM;MAENA,8BAAyB;MACdA,wBAAO;MAAAA,iBAAQ;MAEtBA,oCAMuD;MAHnDA;QAAA;MAAA,EAAwB;MAH5BA,iBAMuD;MAEvDA,sEAMM;MACVA,iBAAM;MAENA,kCAG2C;MACvCA,yBACJ;MAAAA,iBAAS;;;;;;MA3CDA,eAA2B;MAA3BA,2CAA2B;MAQ1BA,eAA0C;MAA1CA,6FAA0C;MAgB3CA,eAAwB;MAAxBA,wCAAwB;MAMvBA,eAAoC;MAApCA,6FAAoC;MAWzCA,eAAsC;MAAtCA,sCAAsC","names":["i0","UpdateUserComponent","constructor","authService","userService","status","getStatus","user","update","updateUser","username","email","subscribe","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\dh123\\OneDrive\\Рабочий стол\\Новая папка (8)\\client\\src\\app\\modules\\user\\components\\update-user\\update-user.component.html","C:\\Users\\dh123\\OneDrive\\Рабочий стол\\Новая папка (8)\\client\\src\\app\\modules\\user\\components\\update-user\\update-user.component.ts"],"sourcesContent":["\n<form #updateProfileForm=\"ngForm\" (ngSubmit)=\"update()\">\n    <div class=\"input-group\">\n        <label>Username: </label>\n\n        <input\n            type=\"text\"\n            name=\"username\"\n            [(ngModel)]=\"user.username\"\n            #username=\"ngModel\"\n            required\n            minLength=\"4\"\n            maxLength=\"12\"\n            pattern=\"^[a-zA-Z0-9]+$\">\n        \n        <div \n            *ngIf=\"username?.invalid && username?.dirty\"\n            class=\"error-message\">\n\n            <div *ngIf=\"username?.errors?.['required']\">Required</div>\n            <div *ngIf=\"username?.errors?.['pattern']\">Only latin characters and numbers allowed</div>\n            <div *ngIf=\"username?.errors?.['minlength']\">Min length equals to 4 characters</div>\n            <div *ngIf=\"username?.errors?.['maxlength']\">Max length equals to 12 characters</div>\n        </div>\n    </div>\n\n    <div class=\"input-group\">\n        <label>Email: </label>\n\n        <input\n            type=\"text\"\n            name=\"email\"\n            [(ngModel)]=\"user.email\"\n            #email=\"ngModel\"\n            required\n            pattern=\"^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$\">\n\n        <div \n            *ngIf=\"email?.invalid && email?.dirty\"\n            class=\"error-message\">\n\n            <div *ngIf=\"email?.errors?.['required']\">Required</div>\n            <div *ngIf=\"email?.errors?.['pattern']\">Invalid email</div>\n        </div>\n    </div>\n\n    <button \n        type=\"submit\"\n        class=\"light\"\n        [disabled]=\"updateProfileForm.invalid\">\n        Update\n    </button>\n</form> ","import { Component } from '@angular/core';\n\nimport { AuthService } from 'src/app/modules/auth/auth.service';\nimport { UserService } from '../../user.service';\nimport { User } from '../../user.model';\n\n@Component({\n    selector: 'app-update-user',\n    templateUrl: './update-user.component.html',\n    styleUrls: ['./update-user.component.scss']\n})\nexport class UpdateUserComponent {\n    user!: User;\n\n    constructor(\n        private authService: AuthService,\n        private userService: UserService,\n    ) {\n        const status = this.authService.getStatus();\n        if (status) {\n            this.user = status.user; \n        }\n    }\n\n    update() {\n        this.userService.updateUser({\n            username: this.user?.username,\n            email: this.user?.email,\n        }).subscribe(\n            () => {\n                const status = this.authService.getStatus();\n            }\n        );\n    }\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}